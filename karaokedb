DROP TABLE IF EXISTS CONTRIBUTE;
DROP TABLE IF EXISTS PICK;
DROP TABLE IF EXISTS KARAOKEFILE;
DROP TABLE IF EXISTS SONG;
DROP TABLE IF EXISTS CONTRIBUTOR;
DROP TABLE IF EXISTS USER;

CREATE TABLE SONG (
    SONGID INT PRIMARY KEY AUTO_INCREMENT,
    ARTIST VARCHAR(30),
    TITLE VARCHAR(30));

CREATE TABLE CONTRIBUTOR(
    CONTRIBUTORID INT PRIMARY KEY AUTO_INCREMENT,
    LNAME VARCHAR(18));

CREATE TABLE USER(
    USERID INT PRIMARY KEY AUTO_INCREMENT,
    FNAME VARCHAR(18),
    LNAME VARCHAR(18));

CREATE TABLE CONTRIBUTE(
    SONGID INT,
    CONTRIBUTORID INT,
    CONTRIBUTIONTYPE VARCHAR(20),

    PRIMARY KEY (SONGID, CONTRIBUTORID),
    FOREIGN KEY (SONGID) REFERENCES SONG(SONGID),
    FOREIGN KEY (CONTRIBUTORID) REFERENCES CONTRIBUTOR(CONTRIBUTORID));

CREATE TABLE PICK(
    QUEUETYPE VARCHAR(1),
    USERID INT,
    SONGID INT,
    PAID DECIMAL(5,2),
    TIME DATETIME,

    PRIMARY KEY (USERID, SONGID),
    FOREIGN KEY (USERID) REFERENCES USER(USERID),
    FOREIGN KEY (SONGID) REFERENCES SONG(SONGID));

CREATE TABLE KARAOKEFILE(
    FILEID INT PRIMARY KEY AUTO_INCREMENT,
    SONGID INT,
    VERSION VARCHAR(20),

    FOREIGN KEY (SONGID) REFERENCES SONG(SONGID));
